<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
        <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400i&display=swap" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/jszip.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/xlsx.js"></script>
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <script src="http://d3js.org/topojson.v0.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.1.1/css/ol.css" type="text/css">
        <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.1.1/build/ol.js"></script>

        <script src="./data-parser/parse-data.js"></script>
        <script src="./GK2WGS/javasc_gk2utm.js"></script>

        <script>
            
        </script>
        <style>
            body{
                font-family: 'Open Sans', sans-serif;
                font-family: 'Roboto', sans-serif;
            }
            .obcinaHover{ 
                fill: red; 
                }
                
            .map {
                height: 92vh;
                width: 100%;
                }
            nav{
                height: 8vh;
            }
            nav a{
                color: inherit;
                font-size: 150%;
            }
            nav a:hover{
                color: cyan;
            }
            .roboto-italic{
                font-family: 'Open Sans', sans-serif;
            }
            .company-name{
                font-size: 150%;
                cursor: default;
                -webkit-user-select: none; /* Safari */        
                -moz-user-select: none; /* Firefox */
                -ms-user-select: none; /* IE10+/Edge */
                user-select: none; /* Standard */
            }
            #mySidenav{
                position: absolute;
                -webkit-transition: left 2s;
                transition: left 2s;
            }

            #mySidenav a {
                
                z-index: 2;
                position: absolute; 
                left: -25vh;
                transition: 0.3s;
                padding: 15px;
                width: 15vw;
                text-decoration: none;
                font-size: 20px;
                color: white;
                border-radius: 0 5px 5px 0;
                margin-top: 30vh;
                text-align: left;
            }

            #map{
                z-index: 1;
            }

            #mySidenav a:hover {
            left: 0;
            }

            #about {
            top: 20px;
            background-color: #477998;
            }

            #blog {
            top: 80px;
            background-color: #343A40;
            }

            #projects {
            top: 140px;
            background-color: #F64740;
            }

            #contact {
            top: 200px;
            background-color: #294936;
            }
        </style>
    </head>
    <body>
            <script src="lib/bootstrap/bootstrap.min.js"></script>
            <script src="lib/jquery-3.4.1.js"></script>

            <nav class="navbar navbar-expand-md bg-dark text-white">
                    <a class="navbar-brand" href="#"><img src="./assets/placeholder-svgrepo-com.svg" alt="Our logo" width="50px" height="50px"></a>
                    <div class="company-name">
                        <span class="roboto">MOJSTER</span><span class="roboto-italic text-info">MIHA</span>
                    </div>
                        
                        </li>
                      </ul>
                    </div>
                  </nav>

        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]
        <object data="./obcine.svg" type="image/svg+xml" id="alphasvg" width="50%" height="50%" style="float:left">

        </object>
    <div style="float:left;">

            
        
        <br>
        <h1>Ime obcine:</h1>
        <h1 id="obcinaIme"></h1>
    </div>
    <div style="float:left;">
        <h1>
            
        </h1>
    </div>-->
        <script async defer>
            /*function mouseOverEffect() {
                for (let path of this.querySelectorAll("path")) {
                    path.style.fill="red";
                }
                document.getElementById("obcinaIme").innerText = this.attributes[1].value
            }
            function mouseOutEffect() {
                for (let path of this.querySelectorAll("path")) {
                    path.style.fill="gray";
                }
            }
                let a = document.getElementById("alphasvg");
                let svgDoc;
                let obcine = [];
                const css = ''; 
                let style = document.createElement('style');

                a.addEventListener("load", function(){
                    let svgDoc = a.contentDocument.querySelector("svg");
                    obcine = svgDoc.getElementsByTagName('g')
                    let svg = svgDoc.getElementById("obc_001");
                    for (let obcina of obcine) {
                        for (let path of obcina.querySelectorAll("path")) {
                            path.style.fill="gray";
                        }
                        obcina.addEventListener('mouseover', mouseOverEffect);
                        obcina.addEventListener('mouseout', mouseOutEffect);
                    }
                    
            })*/
            
        </script>

        <div>
                <div id="mySidenav" class="sidenav">
                        <a href="#" id="about">Gradbena dovoljenja</a>
                        <a href="#" id="blog">Prostorski naƒçrt</a>
                        <a href="#" id="projects">Zemljevid Slovenije</a>
                        <a href="#" id="contact">O projektu</a>
                </div>
                <div id="map" class="map">
                
                </div>
        </div>

        <script type="text/javascript">

        getCSV("./data/bled-parcele.csv");
        function drawLayer(json){
            let geojsonObject = json;
            console.log(JSON.stringify(json));
            /*let geojsonObject = {
                "type": "FeatureCollection",
                "crs": {
                    "type": "name",
                    "properties": {
                        "name": "ESPG:4326"
                    }
                },
                "features": [{
                    "type": "Feature",
                    "geometry": {
                        "type": "MultiPolygon",
                        "coordinates": [
                            [[
                                [14.117486755652731, 46.36997153269973],
                                [14.116956832130777, 46.36955159955228],
                                [14.116955157113685, 46.36955068692423],
                                [14.11716217273554, 46.36937512695324],
                                [14.117263569008207, 46.36943079102995],
                                [14.117394551023247, 46.369319694723224],
                                [14.117862384016469, 46.36958358620496],
                                [14.117730999412295, 46.369695489691416],
                                [14.117780394103942, 46.36972763011143],
                                [14.117573955326437, 46.36989968672216],
                                [14.11757228028838, 46.36989877410305],
                                [14.117486755652731, 46.36997153269973]
                            ]],
                            [[
                                [14.117993774942319, 46.36950362269916],
                                [14.117987165662184, 46.36951049967846],
                                [14.117982871099946, 46.36951892399856],
                                [14.117900944377492, 46.36961051476372],
                                [14.117905063989355, 46.36962107320648],
                                [14.117904790956908, 46.36962997833953],
                                [14.117899543292996, 46.369641094481835],
                                [14.117703922158706, 46.36990842504231],
                                [14.117686359635965, 46.3699336619444],
                                [14.11765743827809, 46.369970147864876],
                                [14.11753061912755, 46.37011330657211],
                                [14.11736069636909, 46.37001887682501],
                                [14.117132291078164, 46.369891696302524],
                                [14.117083344142001, 46.36986405765635],
                                [14.116960484336674, 46.36997107747068],
                                [14.11644724358166, 46.369685868726876],
                                [14.11650134143571, 46.36965992400634],
                                [14.116517067802864, 46.369668052766315],
                                [14.116533305947875, 46.369660530329696],
                                [14.116527801902558, 46.369647172029865],
                                [14.1167971162989, 46.36951770884054],
                                [14.116843092626846, 46.36949566013437],
                                [14.116858818998601, 46.36950378884758],
                                [14.116875057048388, 46.369496266361544],
                                [14.116869814302625, 46.36948282011951],
                                [14.117182476465617, 46.36933299649732],
                                [14.117198201395741, 46.369341215125026],
                                [14.11721443790484, 46.369333782550825],
                                [14.117209197983126, 46.36932015640166],
                                [14.117504437784364, 46.36917865505494],
                                [14.117528900685233, 46.36916885654123],
                                [14.117544088434519, 46.36917815064975],
                                [14.117560964526042, 46.36917135275597],
                                [14.11755702557279, 46.36915764666845],
                                [14.117682998994573, 46.36910742255366],
                                [14.117801024441675, 46.36905839672229],
                                [14.117816993407903, 46.369067606836786],
                                [14.117833742363219, 46.36906062797976],
                                [14.1178285023122, 46.369047001857425],
                                [14.117964848931905, 46.368990199352076],
                                [14.118005416559061, 46.3689730570106],
                                [14.118090355222266, 46.368936642225144],
                                [14.118171384639622, 46.36893321704693],
                                [14.11818993252474, 46.368951804050894],
                                [14.118203513146716, 46.36896405478379],
                                [14.118218656172163, 46.36897613759329],
                                [14.118212979811991, 46.36898158221154],
                                [14.118307615722006, 46.36902927580314],
                                [14.11831316067425, 46.36902392014123],
                                [14.118332430696269, 46.369029916587124],
                                [14.118354828408815, 46.369035397260454],
                                [14.118438501839673, 46.369053495561005],
                                [14.118447565742859, 46.36906373213246],
                                [14.118450590888342, 46.36906960358911],
                                [14.118437411566816, 46.36907283117],
                                [14.118442708098222, 46.36908294878781],
                                [14.118455104777794, 46.36907989512982],
                                [14.118457082985346, 46.36910240336641],
                                [14.118451221771691, 46.369119363],
                                [14.118441383806427, 46.369133053046134],
                                [14.118423317952109, 46.3691491990128],
                                [14.1183655911959, 46.36919886935273],
                                [14.118331850661708, 46.36922794066145],
                                [14.118316431604432, 46.36924113789644],
                                [14.118306769856021, 46.36923575520705],
                                [14.118297017059502, 46.369244137543504],
                                [14.118306677363917, 46.369249610194686],
                                [14.118111617925463, 46.36941743668061],
                                [14.118056356956272, 46.36946730578256],
                                [14.118020044254118, 46.369502745219194],
                                [14.118009907265114, 46.36951076468563],
                                [14.117993774942319, 46.36950362269916]
                            ]],
                            [[
                                [14.117486755652731, 46.36997153269973],
                                [14.11757228028838, 46.36989877410305],
                                [14.117573955326437, 46.36989968672216],
                                [14.117780394103942, 46.36972763011143],
                                [14.117730999412295, 46.369695489691416],
                                [14.117862384016469, 46.36958358620496],
                                [14.117394551023247, 46.369319694723224],
                                [14.117263569008207, 46.36943079102995],
                                [14.11716217273554, 46.36937512695324],
                                [14.116955157113685, 46.36955068692423],
                                [14.116956832130777, 46.36955159955228],
                                [14.116871432853129, 46.369624628575394],
                                [14.117486755652731, 46.36997153269973]
                            ]]
                        ]
                    },
                    "properties": {
                        "last_change": "2017-09-20 07:31:04",
                        "plot": "1234",
                        "type": "3",
                        "municipality": "3",
                        "polyColor": "#5FE4BE"
                    }
                }]
            }*/

            
        
                var map = new ol.Map({
                    target: 'map',
                    layers: [
                        new ol.layer.Tile({
                            source: new ol.source.OSM()
                        }),
                        new ol.layer.Vector({
                        source: new ol.source.Vector({
                            features: (new ol.format.GeoJSON({
                            featureProjection: 'EPSG:3857'
                            })).readFeatures(geojsonObject)
                        }),
                        style: new ol.style.Style({
                            stroke: new ol.style.Stroke({
                            color: 'rgba(29, 130, 29, 1)',
                            width: 2
                            }),
                            fill: new ol.style.Fill({
                            color: 'rgba(0, 255, 0, 0.45)'
                            })
                        })
                        })
                    ],
                    view: new ol.View({
                        center: ol.proj.fromLonLat([14.116955157113685, 46.36955068692423]),
                        zoom: 18,
                        projection: 'EPSG:3857'
                    })
                });
            }
        </script>
    </body>
</html>